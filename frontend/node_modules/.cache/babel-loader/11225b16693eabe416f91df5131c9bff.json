{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\nissa\\\\Desktop\\\\SKULE\\\\4th Year\\\\ECE444\\\\code\\\\project-1-web-application-design-education-pathways-group-1-agility\\\\Education_Pathways\\\\frontend\\\\src\\\\components\\\\EditCourseDescription.js\";\nimport React, { Component } from \"react\";\nimport axios from \"../axiosInstance/AxiosInstance\";\nimport Spinner from \"./Spinner\";\nimport \"./css/edit-course-description.css\";\nimport \"bootstrap/dist/css/bootstrap.css\";\nimport { Redirect } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst parseArr = value => {\n  let arr = value.replace(/\\s/g, \"\") === \"\" ? [] : value.replace(/\\s/g, \"\").split(\",\");\n\n  if (arr.length > 0) {\n    while (arr[arr.length - 1] === \"\") arr.pop();\n  }\n\n  return arr;\n};\n\nclass EditCourseDesc extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onSubmit = async event => {\n      this.setState({\n        dispSpinner: true\n      });\n\n      try {\n        const res = await axios.post(\"/users/login\", {\n          email: event.target.username.value,\n          password: event.target.password.value\n        });\n        const {\n          token\n        } = res.data;\n        localStorage.setItem(\"access_token\", token);\n        const pre_requisite = parseArr(event.target.prerequisites.value);\n        const co_requisite = parseArr(event.target.corequisites.value);\n        const exclusion = parseArr(event.target.exclusions.value);\n        await axios.patch(`courses/${this.props.match.params.id}`, {\n          \"Course Description\": event.target.description.value,\n          Code: event.target.code.value,\n          Name: event.target.name.value,\n          Faculty: event.target.faculty.value,\n          Department: event.target.department.value,\n          \"Pre-requisites\": pre_requisite,\n          Corequisite: co_requisite,\n          Exclusion: exclusion\n        });\n        this.setState({\n          editDone: true\n        });\n      } catch (err) {\n        event.preventDefault();\n        event.target.password.value = \"\";\n        alert(\"Unable to update course. Please confirm that the admin credentials are correct.\");\n      }\n\n      this.setState({\n        dispSpinner: false\n      });\n    };\n\n    this.state = {\n      course_code: \"\",\n      course_name: \"\",\n      course_description: \"\",\n      faculty: \"\",\n      department: \"\",\n      prerequisites: [],\n      corequisites: [],\n      exclusions: [],\n      dispSpinner: false,\n      editDone: false\n    };\n  }\n\n  componentDidMount() {\n    axios.get(`courses/${this.props.match.params.id}`).then(res => {\n      this.setState({\n        course_code: res.data.Code\n      });\n      this.setState({\n        course_name: res.data.Name\n      });\n      this.setState({\n        course_description: res.data[\"Course Description\"]\n      });\n      this.setState({\n        faculty: res.data.Faculty\n      });\n      this.setState({\n        department: res.data.Department\n      });\n      this.setState({\n        prerequisites: res.data[\"Pre-requisites\"]\n      });\n      this.setState({\n        corequisites: res.data[\"Corequisite\"]\n      });\n      this.setState({\n        exclusions: res.data[\"Exclusion\"]\n      });\n    });\n  }\n\n  render() {\n    return this.state.editDone ? /*#__PURE__*/_jsxDEV(Redirect, {\n      to: `/courseDetails/${this.props.match.params.id}`\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this) : this.state.dispSpinner ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/courseDetails/${this.props.match.params.id}`,\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          id: \"form-back-button\",\n          className: \"syllabus-link\",\n          children: \"Back\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        style: {\n          marginBottom: \"2.5%\"\n        },\n        children: [this.state.course_code, \": \", this.state.course_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"form\",\n        onSubmit: this.onSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Admin Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          placeholder: \"Admin Email\",\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Admin Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Admin credentials required to update.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"section-divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Course Code\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"code\",\n          defaultValue: this.state.course_code,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Course Name\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"name\",\n          defaultValue: this.state.course_name,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Course Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          rows: \"10\",\n          cols: \"100\",\n          type: \"text\",\n          id: \"description\",\n          defaultValue: this.state.course_description,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Faculty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"faculty\",\n          defaultValue: this.state.faculty,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Department\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"department\",\n          defaultValue: this.state.department,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          style: {\n            margin: \"2%\"\n          },\n          className: \"form-field-label-underlined\",\n          children: \"\\xA0Course Requisites\\xA0\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Please enter requisite course codes, seperated by commas.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Ex. ABC123H1, ABC456H1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Pre-Requisites\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"prerequisites\",\n          defaultValue: this.state.prerequisites,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Co-Requisites\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"corequisites\",\n          defaultValue: this.state.corequisites,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"form-field-label\",\n          children: \"Exclusions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"exclusions\",\n          defaultValue: this.state.exclusions,\n          className: \"text-input form-field\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Update\",\n          className: \"syllabus-link\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default EditCourseDesc;","map":{"version":3,"sources":["C:/Users/nissa/Desktop/SKULE/4th Year/ECE444/code/project-1-web-application-design-education-pathways-group-1-agility/Education_Pathways/frontend/src/components/EditCourseDescription.js"],"names":["React","Component","axios","Spinner","Redirect","Link","parseArr","value","arr","replace","split","length","pop","EditCourseDesc","constructor","props","onSubmit","event","setState","dispSpinner","res","post","email","target","username","password","token","data","localStorage","setItem","pre_requisite","prerequisites","co_requisite","corequisites","exclusion","exclusions","patch","match","params","id","description","Code","code","Name","name","Faculty","faculty","Department","department","Corequisite","Exclusion","editDone","err","preventDefault","alert","state","course_code","course_name","course_description","componentDidMount","get","then","render","marginBottom","margin"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport axios from \"../axiosInstance/AxiosInstance\";\r\nimport Spinner from \"./Spinner\";\r\nimport \"./css/edit-course-description.css\";\r\nimport \"bootstrap/dist/css/bootstrap.css\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst parseArr = (value) => {\r\n  let arr =\r\n    value.replace(/\\s/g, \"\") === \"\" ? [] : value.replace(/\\s/g, \"\").split(\",\");\r\n  if (arr.length > 0) {\r\n    while (arr[arr.length - 1] === \"\") arr.pop();\r\n  }\r\n  return arr;\r\n};\r\n\r\nclass EditCourseDesc extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      course_code: \"\",\r\n      course_name: \"\",\r\n      course_description: \"\",\r\n      faculty: \"\",\r\n      department: \"\",\r\n      prerequisites: [],\r\n      corequisites: [],\r\n      exclusions: [],\r\n      dispSpinner: false,\r\n      editDone: false,\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    axios.get(`courses/${this.props.match.params.id}`).then((res) => {\r\n      this.setState({ course_code: res.data.Code });\r\n      this.setState({ course_name: res.data.Name });\r\n      this.setState({ course_description: res.data[\"Course Description\"] });\r\n      this.setState({ faculty: res.data.Faculty });\r\n      this.setState({ department: res.data.Department });\r\n      this.setState({ prerequisites: res.data[\"Pre-requisites\"] });\r\n      this.setState({ corequisites: res.data[\"Corequisite\"] });\r\n      this.setState({ exclusions: res.data[\"Exclusion\"] });\r\n    });\r\n  }\r\n\r\n  onSubmit = async (event) => {\r\n    this.setState({ dispSpinner: true });\r\n    try {\r\n      const res = await axios.post(\"/users/login\", {\r\n        email: event.target.username.value,\r\n        password: event.target.password.value,\r\n      });\r\n      const { token } = res.data;\r\n      localStorage.setItem(\"access_token\", token);\r\n      const pre_requisite = parseArr(event.target.prerequisites.value);\r\n      const co_requisite = parseArr(event.target.corequisites.value);\r\n      const exclusion = parseArr(event.target.exclusions.value);\r\n\r\n      await axios.patch(`courses/${this.props.match.params.id}`, {\r\n        \"Course Description\": event.target.description.value,\r\n        Code: event.target.code.value,\r\n        Name: event.target.name.value,\r\n        Faculty: event.target.faculty.value,\r\n        Department: event.target.department.value,\r\n        \"Pre-requisites\": pre_requisite,\r\n        Corequisite: co_requisite,\r\n        Exclusion: exclusion,\r\n      });\r\n      this.setState({ editDone: true });\r\n    } catch (err) {\r\n      event.preventDefault();\r\n      event.target.password.value = \"\";\r\n      alert(\"Unable to update course. Please confirm that the admin credentials are correct.\");\r\n    }\r\n    this.setState({ dispSpinner: false });\r\n  };\r\n\r\n  render() {\r\n    return this.state.editDone ? (\r\n      <Redirect to={`/courseDetails/${this.props.match.params.id}`} />\r\n    ) : this.state.dispSpinner ? (\r\n      <Spinner />\r\n    ) : (\r\n      <div>\r\n        <Link to={`/courseDetails/${this.props.match.params.id}`}>\r\n          <button id={\"form-back-button\"} className={\"syllabus-link\"}>\r\n            Back\r\n          </button>\r\n        </Link>\r\n        <h1 style={{ marginBottom: \"2.5%\" }}>\r\n          {this.state.course_code}: {this.state.course_name}\r\n        </h1>\r\n        <form className=\"form\" onSubmit={this.onSubmit}>\r\n          <label className=\"form-field-label\">Admin Username</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            placeholder=\"Admin Email\"\r\n            className=\"text-input form-field\"\r\n          />\r\n          <label className=\"form-field-label\">Admin Password</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            className=\"text-input form-field\"\r\n          />\r\n          <p>Admin credentials required to update.</p>\r\n          <hr className=\"section-divider\"></hr>\r\n          <br></br>\r\n          <label className=\"form-field-label\">Course Code</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"code\"\r\n            defaultValue={this.state.course_code}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <label className=\"form-field-label\">Course Name</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"name\"\r\n            defaultValue={this.state.course_name}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <label className=\"form-field-label\">Course Description</label>\r\n          <textarea\r\n            rows=\"10\"\r\n            cols=\"100\"\r\n            type=\"text\"\r\n            id=\"description\"\r\n            defaultValue={this.state.course_description}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <label className=\"form-field-label\">Faculty</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"faculty\"\r\n            defaultValue={this.state.faculty}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <label className=\"form-field-label\">Department</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"department\"\r\n            defaultValue={this.state.department}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <h1 style={{ margin: \"2%\" }} className=\"form-field-label-underlined\">\r\n            &nbsp;Course Requisites&nbsp;\r\n          </h1>\r\n          <p>Please enter requisite course codes, seperated by commas.</p>\r\n          <p>Ex. ABC123H1, ABC456H1</p>\r\n          <br></br>\r\n          <label className=\"form-field-label\">Pre-Requisites</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"prerequisites\"\r\n            defaultValue={this.state.prerequisites}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <label className=\"form-field-label\">Co-Requisites</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"corequisites\"\r\n            defaultValue={this.state.corequisites}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <label className=\"form-field-label\">Exclusions</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"exclusions\"\r\n            defaultValue={this.state.exclusions}\r\n            className=\"text-input form-field\"\r\n          />\r\n          <input type=\"submit\" value=\"Update\" className=\"syllabus-link\" />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditCourseDesc;\r\n"]},"metadata":{},"sourceType":"module"}